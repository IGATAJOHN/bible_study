<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bible Study - Home</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <!-- Vendor CSS Files -->
  <link href="{{url_for('static',filename='assets/vendor/aos/aos.css')}}" rel="stylesheet">
  <link href="{{url_for('static',filename='assets/vendor/bootstrap/css/bootstrap.min.css')}}" rel="stylesheet">
  <link href="{{url_for('static',filename='assets/vendor/bootstrap-icons/bootstrap-icons.css')}}" rel="stylesheet">
  <link href="{{url_for('static',filename='assets/vendor/boxicons/css/boxicons.min.css')}}" rel="stylesheet">
  <link href="{{url_for('static',filename='assets/vendor/glightbox/css/glightbox.min.css')}}" rel="stylesheet">
  <link href="{{url_for('static',filename='assets/vendor/swiper/swiper-bundle.min.css')}}" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Template Main CSS File -->
  <link href="{{url_for('static',filename='assets/css/style.css')}}" rel="stylesheet">
  <link rel="manifest" href="/manifest.json">

  <link rel="stylesheet" href="{{url_for('static',filename='css/style.css')}}">
</head>
<style>
    .logout-dialog {
            background-color: #ffffff;
            border-radius: 10px;
            padding: 20px;
            width: 300px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .logout-dialog .btn-cancel {
            background-color: #f8f9fa;
            color: #000000;
        }

        .logout-dialog .btn-yes {
            background-color: #dc3545;
            color: #ffffff;
        }
        /* Default Light Theme */
body.light-theme {
    background-color: #f8f9fa; /* Bootstrap's light background */
    color: #000;
}

/* Dark Theme */
body.dark-theme {
    background-color: #343a40; /* Bootstrap's dark background */
    color: #fff;
}

/* Example styling for your cards and text */
.card {
    border: 1px solid rgba(0,0,0,0.125);
    background-color: #fff;
}

body.dark-theme .card {
    border: 1px solid rgba(255,255,255,0.125);
    background-color: #444;
}

/* Make sure to adjust other elements as necessary */

</style>
<body class="light-theme">
  <!-- ======= Mobile nav toggle button ======= -->
  <i class="bi bi-list mobile-nav-toggle d-xl-none"></i>

  <!-- ======= Header ======= -->
  <header id="header">
    <div class="d-flex flex-column">

      <div class="profile">
        <img src="{{url_for('static',filename='assets/img/bible.jfif')}}" 
     alt="Toggle Theme" 
     id="themeToggle" 
     class="img-fluid rounded-circle" 
     style="background-color: #004BAB; cursor: pointer;">

        <h1 class="text-light"><a href="index.html">Bible Study</a></h1>
   
      </div>

      <nav id="navbar" class="nav-menu navbar">
        <ul>
          <li><a href="{{url_for('chat')}}" class="nav-link scrollto active"><i class="bx bx-message"></i> <span>Study</span></a></li>
          
        
          
        </ul>
      </nav><!-- .nav-menu -->
    </div>
  </header><!-- End Header -->
  <!-- Logout Confirmation Modal -->
 <!-- Logout Confirmation Modal -->
 <div class="modal fade" id="logoutModal" tabindex="-1" aria-labelledby="logoutModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content logout-dialog">
          <div class="modal-body text-center">
              <p class="font-weight-bold">Are you sure you want to log out?</p>
              <div>
                  <button type="button" class="btn btn-cancel mr-2" data-bs-dismiss="modal">Cancel</button>
                  <button type="button" class="btn btn-yes" id="confirmLogout">Yes</button>
              </div>
          </div>
      </div>
  </div>
</div>
{%block content%}

{%endblock content%}
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Vendor JS Files -->
    <script src="{{url_for('static',filename='assets/vendor/purecounter/purecounter_vanilla.js')}}"></script>
    <script src="{{url_for('static',filename='assets/vendor/aos/aos.js')}}"></script>
    <script src="{{url_for('static',filename='assets/vendor/bootstrap/js/bootstrap.bundle.min.js')}}"></script>
    <script src="{{url_for('static',filename='assets/vendor/glightbox/js/glightbox.min.js')}}"></script>
    <script src="{{url_for('static',filename='assets/vendor/isotope-layout/isotope.pkgd.min.js')}}"></script>
    <script src="{{url_for('static',filename='assets/vendor/swiper/swiper-bundle.min.js')}}"></script>
    <script src="{{url_for('static',filename='assets/vendor/typed.js/typed.umd.js')}}"></script>
    <script src="{{url_for('static',filename='assets/vendor/waypoints/noframework.waypoints.js')}}"></script>
    <script src="{{url_for('static',filename='assets/vendor/php-email-form/validate.js')}}"></script>
    
    <!-- Template Main JS File -->
    <script src="{{url_for('static',filename='assets/js/main.js')}}"></script>
        <script>
        if ('serviceWorker' in navigator) {
          window.addEventListener('load', function() {
            navigator.serviceWorker.register('/service-worker.js')
              .then(function(registration) {
                console.log('ServiceWorker registration successful with scope: ', registration.scope);
              }, function(error) {
                console.log('ServiceWorker registration failed: ', error);
              });
          });
        }
      </script>
</body>
<script>

$(document).ready(function() {
        $('#send-btn').click(function() {
            sendMessage();
        });

        $('#user-input').keypress(function(e) {
            if (e.which == 13) {  // Enter key pressed
                sendMessage();
            }
        });

        function sendMessage() {
            var userInput = $('#user-input').val();
            if (userInput.trim() === '') {
                return;
            }

            // Append user message to chat body
            $('#chat-body').append(`
                <div class="message user">
                    <div class="text">${userInput}</div>
                </div>
            `);
            $('#user-input').val('');  // Clear input field

            // Scroll to the bottom of the chat body
            $('#chat-body').scrollTop($('#chat-body')[0].scrollHeight);

            // Send the message to the backend
            $.ajax({
                url: '/get-response',
                type: 'POST',
                contentType: 'application/json',
                data: JSON.stringify({ input: userInput }),
                success: function(response) {
                    if (response.error) {
                        alert('Error: ' + response.error);
                        return;
                    }

                    var botResponse = response.response;

                    // Append bot response to chat body
                    $('#chat-body').append(`
                        <div class="message bot">
                            <i class="bi bi-robot"></i>
                            <div class="text">${botResponse}</div>
                        </div>
                    `);

                    // Scroll to the bottom of the chat body
                    $('#chat-body').scrollTop($('#chat-body')[0].scrollHeight);
                },
                error: function(xhr, status, error) {
                    alert('An error occurred: ' + error);
                }
            });
        }
    });
</script>
</html>
